---
import { Icon } from 'astro-icon/components';
import Button from './Button.astro';

/* =========================
   Types
========================= */
export interface AboutFeature {
  icon: string; 
  label: string;
}

export interface AboutStat {
  value: string;
  label: string;
}

export interface AboutSectionProps {
  id?: string;
  title: string;
  description: string[];
  features: AboutFeature[];
  stats: AboutStat[];
}

/* =========================
   Default / Sample Data
========================= */
const {
  id = "programs",
  title = "Nos Programmes Spécialisés",
  description = ["Nous sommes spécialisés dans les visas de long séjour et les titres de séjour basés sur le talent, l'investissement ou la carrière professionnelle. Chaque étape, du consulat à la Préfecture."],
  features = [
    { icon: "bi:globe2", label: "France Specialist" },
    { icon: "bi:award", label: "Certified Legal Advisors" },
  ],
  stats = [
    { value: "Passeport Talent", label: "For investors, founders, and highly qualified profiles. A 4-year permit to live and work in France with your family, without a separate work authorization."},
    { value: "VLS-TS", label: "The standard long-stay visa for employed professionals or self-sufficient individuals who wish to reside in France for more than 3 months."},
    { value: "Business / Investor", label: "For entrepreneurs creating or acquiring a business in France. Includes strategic consultation on meeting French administrative economic requirements." },
  ],
} = Astro.props as AboutSectionProps;
---

<!-- About Section -->
<section
  id={id}
  class="relative py-16 md:py-20 bg-[#313e52] overflow-hidden">
  
  <div class="max-w-6xl mx-auto px-4 relative">
    <div class="items-center">

      <!-- Text -->
      <div>
        <h2 class="text-3xl md:text-4xl font-semibold text-white" data-i18n="about.title">
          {title}
        </h2>

        {description.map((text, index) => (
          <p class="mt-4 text-white/70 leading-relaxed" data-i18n="about.description">
            {text}
          </p>
        ))}

        <div class="mt-6 flex flex-col md:flex-row md:items-center gap-4 text-white/80">
          {features.map((item, index) => {
            const featureKeys = ['about.features.globalDestinations', 'about.features.certificateSpecialists'];
            return (
              <div class="flex items-center gap-2">
                <Icon name={item.icon} class="w-5 h-5" />
                <span data-i18n={featureKeys[index]}>{item.label}</span>
              </div>
            );
          })}
        </div>
      </div>

      <!-- Stats -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-12">
        {stats.map((stat, index) => {
          const programKeys = ['about.programs.eb1', 'about.programs.eb2', 'about.programs.eb5'];
          const titleKey = programKeys[index] + '.title';
          const descKey = programKeys[index] + '.description';
          return (
            <div class="rounded-2xl bg-white/5 border border-white/10 p-6 backdrop-blur hover:scale-105 transition-transform duration-300 flex flex-col gap-4">
              <div class="text-3xl font-semibold text-white" data-i18n={titleKey}>
                {stat.value}
              </div>
              <div class="mt-1 text-white/70 flex-1" data-i18n={descKey}>
                {stat.label}
              </div>
             <Button label="Learn More" href="/programs" variant="white" className="mt-auto" i18nKey="common.learnMore"></Button>
            </div>
          );
        })}
      </div>
    </div>
  </div>
</section>