---
import AboutSection from "@src/components/AboutSection.astro";
import CtaSection from "@src/components/CtaSection.astro";
import HeroSection from "@src/components/HeroSection.astro";
import CountriesSection from "@src/components/CountriesSection.astro";
import WhySection from "@src/components/WhySection.astro";
import MainLayout from "@src/layouts/MainLayout.astro";
import Map from "@src/components/Map.astro";
import Sponsors from "@src/components/Sponsors.astro";
---

<MainLayout
  title="New Horizons Immigration Law | Expertos en Inmigración a Francia"
  description="Más de 16,000 familias establecidas en Francia. Especialistas en Passeport Talent, VLS-TS e Inversión. 91% de tasa de aprobación. Consulta gratuita.">
  <HeroSection
      backgroundImage="/img/countries/france/0.webp"
      badgeText="Más de 16,000 casos resueltos · 91% de tasa de aprobación"
      title="Tu Nueva Vida en Francia Empieza Hoy"
      description="Somos el equipo legal que convierte los sueños de vivir en Francia en realidad documentada. VLS-TS, Passeport Talent e Inversión — manejamos cada formulario, cada prefectura y cada plazo por ti."
      avatars={[
        { src: "/img/male1.webp", alt: "Cliente 1" },
        { src: "/img/male2.webp", alt: "Cliente 2" },
        { src: "/img/female1.webp", alt: "Cliente 3" },
        { src: "/img/female2.webp", alt: "Cliente 4" },
      ]}
      reviewText="+16,000 familias establecidas en Francia"
      rating={5}
      badgeI18nKey="hero.badge"
      titleI18nKey="hero.title"
      descriptionI18nKey="hero.description"
      reviewTextI18nKey="hero.reviewText"
      ctas={[
        {
          label: "Ver Programas →",
          href: "/programs",
          variant: "white",
          i18nKey: "hero.cta.programs"
        },
        {
          label: "Nuestra Historia",
          href: "/about",
          variant: "outline",
          i18nKey: "hero.cta.aboutUs"
        },
      ]}
  />
  <Map />
  <WhySection title="¿Por qué New Horizons es la elección correcta?" />
  <CountriesSection />
  <Sponsors />
  <AboutSection />
  <CtaSection
    title="¿Listo para empezar tu proceso hacia Francia?"
    description="Más de 16,000 familias ya lograron establecerse con nuestra guía. Agenda una consulta de 30 minutos y descubre en una sola llamada si calificas y qué programa te corresponde."
    backgroundImage="/img/countries/france/2.webp"
    buttons={[
      { label: "Ver Visas y Programas", href: "/programs", variant: "white" },
      { label: "Agenda una Consulta", href: "/contact", variant: "outline" },
    ]}
  />
</MainLayout>
<script>
  /**
   * Smooth Scroll
   */
  (function initSmoothScroll(offset: number = 80): void {
    document
      .querySelectorAll<HTMLAnchorElement>('a[href^="#"]')
      .forEach((anchor) => {
        anchor.addEventListener("click", (e: MouseEvent) => {
          const href = anchor.getAttribute("href");
          if (!href || href === "#" || href.length < 2) return;

          const target = document.querySelector<HTMLElement>(href);
          if (!target) return;

          e.preventDefault();

          const top =
            target.getBoundingClientRect().top +
            window.pageYOffset -
            offset;

          window.scrollTo({
            top,
            behavior: "smooth",
          });

          history.pushState(null, "", href);
        });
      });
  })(80);
</script>