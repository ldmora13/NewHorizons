---
import MainLayout from "@src/layouts/MainLayout.astro";
import ProgramCard from "@src/components/ProgramCard.astro";
import HeadingSection from "@src/components/HeadingSection.astro";
import { Icon } from "astro-icon/components";

const programs = [
  {
    id: "TALENT",
    titleKey: "about.programs.eb1.title",
    descriptionKey: "about.programs.eb1.description",
    price: "$2,000.00",
    image: "/img/countries/france/0.webp",
    features: [
      { icon: "bi:calendar-check", labelKey: "programs.talent.f1", label: "Permiso de 4 a√±os renovable" },
      { icon: "bi:people",         labelKey: "programs.talent.f2", label: "Incluye c√≥nyuge e hijos" },
      { icon: "bi:briefcase",      labelKey: "programs.talent.f3", label: "Autorizaci√≥n de trabajo incluida" },
      { icon: "bi:globe",          labelKey: "programs.talent.f4", label: "Acceso al mercado de la UE" },
    ],
    profileKey: "programs.talent.profile",
    profile: "Investigadores, artistas, emprendedores e inversores con perfil calificado.",
  },
  {
    id: "VLSTS",
    titleKey: "about.programs.eb2.title",
    descriptionKey: "about.programs.eb2.description",
    price: "$5,000.00",
    image: "/img/countries/france/1.webp",
    features: [
      { icon: "bi:clock",          labelKey: "programs.vlsts.f1", label: "Estancia +3 meses" },
      { icon: "bi:shield-check",   labelKey: "programs.vlsts.f2", label: "Validaci√≥n OFII incluida" },
      { icon: "bi:building",       labelKey: "programs.vlsts.f3", label: "Para empleados y trabajadores remotos" },
      { icon: "bi:arrow-repeat",   labelKey: "programs.vlsts.f4", label: "Renovable como Titre de S√©jour" },
    ],
    profileKey: "programs.vlsts.profile",
    profile: "Profesionales con contrato franc√©s o personas con recursos propios que buscan residir en Francia.",
  },
  {
    id: "INVESTOR",
    titleKey: "about.programs.eb5.title",
    descriptionKey: "about.programs.eb5.description",
    price: "$8,000.00",
    image: "/img/countries/france/4.webp",
    features: [
      { icon: "bi:graph-up-arrow", labelKey: "programs.investor.f1", label: "Creaci√≥n o compra de empresa" },
      { icon: "bi:bank",           labelKey: "programs.investor.f2", label: "Apertura cuenta bancaria francesa" },
      { icon: "bi:person-workspace",labelKey: "programs.investor.f3", label: "Asesor√≠a jur√≠dica y fiscal" },
      { icon: "bi:trophy",         labelKey: "programs.investor.f4", label: "V√≠a r√°pida a residencia permanente" },
    ],
    profileKey: "programs.investor.profile",
    profile: "Empresarios e inversores que buscan establecer o adquirir una empresa en Francia.",
  },
];

const steps = [
  { num: "01", icon: "bi:chat-dots",        titleKey: "programs.step1.title", title: "Consulta Inicial",         descKey: "programs.step1.desc", desc: "Evaluamos tu perfil en 30 minutos y te indicamos el programa √≥ptimo." },
  { num: "02", icon: "bi:folder-check",     titleKey: "programs.step2.title", title: "Preparaci√≥n del Dossier",   descKey: "programs.step2.desc", desc: "Compilamos y verificamos cada documento con nuestra revisi√≥n en 3 capas." },
  { num: "03", icon: "bi:building-check",   titleKey: "programs.step3.title", title: "Cita Consular",             descKey: "programs.step3.desc", desc: "Te acompa√±amos en la presentaci√≥n ante el consulado de tu pa√≠s." },
  { num: "04", icon: "bi:airplane",         titleKey: "programs.step4.title", title: "Llegada a Francia",         descKey: "programs.step4.desc", desc: "Gestionamos la validaci√≥n OFII y los tr√°mites de llegada por ti." },
  { num: "05", icon: "bi:house-heart",      titleKey: "programs.step5.title", title: "Titre de S√©jour",           descKey: "programs.step5.desc", desc: "Tramitamos tu Titre de S√©jour y te asesoramos en la renovaci√≥n." },
];
---

<MainLayout title="Visas & Programas Francia ‚Äì New Horizons">
  <HeadingSection
    title="Visas y Programas de Inmigraci√≥n"
    description="Nuestros programas est√°n dise√±ados para llevarte desde tu primera consulta hasta vivir legalmente en Francia. France es nuestro destino estrella ‚Äî conocemos cada Pr√©fecture, cada formulario y cada plazo."
    i18nTitle="pages.programs.title"
    i18nDescription="pages.programs.description"
    backgroundImage="/img/countries/france/2.webp"
  />

  <!-- ==============================
    PROGRAMS GRID
  ============================== -->
  <section class="relative pt-16 md:pt-20 overflow-hidden">
    <div class="max-w-6xl mx-auto px-4">

      <!-- Intro Badge -->
      <div class="flex items-center gap-3 mb-10">
        <span class="text-3xl">üá´üá∑</span>
        <div>
          <p class="text-xs text-white/50 uppercase tracking-widest" data-i18n="programs.flagLabel">Destino Principal</p>
          <h2 class="text-lg font-semibold text-white" data-i18n="programs.flagTitle">Programas Activos en Francia</h2>
        </div>
      </div>

      <!-- Cards Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {programs.map((program) => (
          <article class="group rounded-3xl border border-white/10 bg-white/5 backdrop-blur overflow-hidden hover:scale-[1.02] transition-transform duration-300 flex flex-col">
            <!-- Image -->
            <div class="relative aspect-video overflow-hidden">
              <a href={`/checkout?program=${program.id}`}>
                <img
                  src={program.image}
                  alt={program.id}
                  loading="lazy"
                  class="w-full h-full object-cover transition duration-500 group-hover:scale-110"
                />
                <span class="absolute top-4 left-4 rounded-full bg-blue-600 px-4 py-1 text-xs font-semibold text-white uppercase tracking-wider">
                  üá´üá∑ Francia
                </span>
              </a>
            </div>

            <!-- Body -->
            <div class="p-6 flex flex-col flex-1">
              <h3 class="text-xl font-bold text-white group-hover:text-blue-400 transition-colors">
                <a href={`/checkout?program=${program.id}`} data-i18n={program.titleKey}>Program Title</a>
              </h3>
              <p class="mt-2 text-white/60 text-sm leading-relaxed" data-i18n={program.descriptionKey}>
                Program description.
              </p>

              <!-- Profile tag -->
              <p class="mt-3 text-xs text-blue-300 italic" data-i18n={program.profileKey}>
                {program.profile}
              </p>

              <!-- Features -->
              <ul class="mt-4 space-y-2">
                {program.features.map((f) => (
                  <li class="flex items-center gap-2 text-sm text-white/70">
                    <Icon name={f.icon} class="w-4 h-4 text-blue-400 shrink-0" />
                    <span data-i18n={f.labelKey}>{f.label}</span>
                  </li>
                ))}
              </ul>

              <!-- Price + CTA -->
              <div class="mt-auto pt-6 border-t border-white/10 flex justify-between items-center">
                <div class="flex flex-col">
                  <span class="text-xs text-white/50 uppercase tracking-widest" data-i18n="checkout.total">Honorarios</span>
                  <span class="text-2xl font-bold text-white">{program.price}</span>
                </div>
                <a
                  href={`/checkout?program=${program.id}`}
                  class="inline-flex items-center gap-2 rounded-xl bg-white px-5 py-2.5 text-sm font-bold text-black hover:bg-blue-50 transition-colors"
                >
                  <span data-i18n="common.getStart">Comenzar</span>
                  <Icon name="bi:arrow-right" class="w-4 h-4" />
                </a>
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <!-- ==============================
    HOW IT WORKS ‚Äî 5 STEPS
  ============================== -->
  <section class="relative py-20">
    <div class="max-w-5xl mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-white" data-i18n="programs.processTitle">
          C√≥mo Funciona el Proceso
        </h2>
        <p class="mt-3 text-white/60 max-w-2xl mx-auto" data-i18n="programs.processDesc">
          Desde la consulta inicial hasta tu Titre de S√©jour en Francia ‚Äî manejamos cada paso.
        </p>
      </div>

      <div class="relative">
        <!-- Vertical line connector (desktop) -->
        <div class="hidden md:block absolute left-1/2 top-0 bottom-0 w-px bg-white/10 -translate-x-1/2"></div>

        <div class="space-y-10">
          {steps.map((step, i) => (
            <div class={`relative flex gap-6 items-start ${i % 2 === 0 ? 'md:flex-row' : 'md:flex-row-reverse'}`}>
              <!-- Step Circle -->
              <div class="md:absolute md:left-1/2 md:-translate-x-1/2 shrink-0 w-12 h-12 rounded-full bg-blue-600 border-4 border-slate-900 flex items-center justify-center text-white font-bold text-sm z-10">
                {step.num}
              </div>

              <!-- Content -->
              <div class={`md:w-5/12 rounded-2xl bg-white/5 border border-white/10 p-5 ${i % 2 === 0 ? 'md:mr-auto md:pr-10' : 'md:ml-auto md:pl-10'}`}>
                <div class="flex items-center gap-3 mb-2">
                  <Icon name={step.icon} class="w-5 h-5 text-blue-400" />
                  <h3 class="font-semibold text-white" data-i18n={step.titleKey}>{step.title}</h3>
                </div>
                <p class="text-sm text-white/60 leading-relaxed" data-i18n={step.descKey}>{step.desc}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- ==============================
    CTA BOTTOM
  ============================== -->
  <section class="pb-16 md:pb-24">
    <div class="max-w-6xl mx-auto px-4">
      <div class="rounded-3xl bg-blue-600/10 border border-blue-500/20 p-8 md:p-12 text-center backdrop-blur-sm">
        <h3 class="text-2xl md:text-3xl font-bold text-white mb-4" data-i18n="cta.title">
          ¬øNo sabes cu√°l es el programa correcto para ti?
        </h3>
        <p class="text-white/70 max-w-2xl mx-auto mb-8" data-i18n="cta.description">
          Nuestros expertos eval√∫an tu perfil en 30 minutos y te dicen exactamente qu√© programa te corresponde, qu√© documentos necesitas y cu√°nto tiempo tomar√° el proceso.
        </p>
        <a
          href="/contact"
          class="inline-flex items-center gap-3 rounded-2xl bg-white px-8 py-4 font-bold text-blue-900 hover:bg-blue-50 transition-all hover:scale-105 active:scale-95"
          data-i18n="cta.contactUs"
        >
          Agenda una Consulta Gratuita ‚Üí
        </a>
      </div>
    </div>
  </section>
</MainLayout>
