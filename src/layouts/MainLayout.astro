---
import Header from '@src/components/Header.astro';
import Footer from '@src/components/Footer.astro';

import 'glightbox/dist/css/glightbox.min.css';
import '@src/styles/style.css';
import BackToTop from '@src/components/BackToTop.astro';

const navItems = [
  { label: "Home", href: "/", i18nKey: "common.home" },
  { label: "About", href: "/about", i18nKey: "common.about" },
  { label: "Programs", href: "/programs", i18nKey: "common.programs" },
  { label: "FAQ", href: "/faqs", i18nKey: "common.faq" },
  { label: "Reviews", href: "/reviews", i18nKey: "common.reviews" },
  { label: "Contact", href: "/contact", i18nKey: "common.contact" },
];

interface Props {
  title: string;
  description?: string;
}

const {
  title = "New Horizons Immigration Law | Internacional Migration Experts",
  description = "At NewHorizons Immigrations Law, we specialize in helping people who want to live, work or invest abroad",
} = Astro.props;
---
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>

    <!-- Primary Meta -->
    <meta name="description" content={description} />
    <meta name="i18n-title" content="meta.defaultTitle" />
    <meta name="i18n-description" content="meta.defaultDescription" />
    <meta name="author" content="Author Name" />
    <meta name="robots" content="index, follow" />

    <link rel="canonical" href={Astro.url?.href || "https://newhorizonsimmigrationlaw.org/"} />
    <link rel="icon" type="image/x-icon" href="/img/logo-white.png" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>

  <body class="font-sans bg-[#313e52]">
    <Header
      logo={{
        src: "/img/logo-white.svg",
        alt: "New Horizons Immigration Law",
        href: "/",
      }}
      navItems={navItems}
      cta={{
        label: "Get Start",
        href: "/checkout",
        i18nKey: "common.getStart"
      } as any}
    />
    <main>
      <slot />
    </main>
    <Footer
      backgroundImage="/img/jaydeep-visa.jpg"
      about={{
        title: "New Horizons Immigration Law",
        description:
          "Specialists in international mobility to France, Spain, Portugal, and the UAE. Over 15 years and 16,000 successful cases back us up. Your new life starts with a consultation.",
        titleI18n: "footer.about.title",
        descriptionI18n: "footer.about.description"
      }}
      navigation={[
        { label: "Visas & Programs", href: "/programs", i18nKey: "footer.navigation.immigrationPrograms" },
        { label: "Success Stories", href: "/reviews", i18nKey: "footer.navigation.successStories" },
        { label: "FAQ", href: "/faqs", i18nKey: "footer.navigation.faqs" },
        { label: "Privacy Policy", href: "/privacy", i18nKey: "footer.navigation.privacyPolicy" },
        { label: "Terms of Service", href: "/terms", i18nKey: "footer.navigation.termsOfService" },
      ]}
      programs={[
        { label: "Passeport Talent (France)", i18nKey: "footer.programs.eb1" },
        { label: "VLS-TS Salaré / Visitor", i18nKey: "footer.programs.eb2" },
        { label: "Business Investor", i18nKey: "footer.programs.eb5" },
        { label: "Titre de Séjour", i18nKey: "footer.programs.permanentResidence" },
        { label: "Expat Advisory", i18nKey: "footer.programs.newHorizonsClub" },
      ]}
      copyright="© 2026 New Horizons Immigration Law. International Mobility Specialists."
      copyrightI18n="footer.copyright"
      address="Miami · Madrid · Paris"
      addressI18n="footer.address"
      phone="+1 (909) 547-3238"
      phoneI18n="footer.phone"
      email="info@newhorizonsimmigrationlaw.org"
      emailI18n="footer.email"
    />
    <BackToTop />

    <!-- Alpine.js -->
    <script>
      import Alpine from 'alpinejs';
      declare global {
        interface Window {
          Alpine: typeof Alpine;
        }
      }
      window.Alpine = Alpine;
      Alpine.start();
    </script>

    <!-- GLightbox -->
    <script>
      import GLightbox from 'glightbox';

      const hasLightbox = document.querySelector('.glightbox');
      if (hasLightbox) {
        GLightbox({
          selector: '.glightbox',
          touchNavigation: true,
          loop: true,
        });
      }
    </script>

    <!-- i18n Client - Sistema de Internacionalización Estático -->
    <script is:inline src="/i18n/client.js"></script>
  </body>
</html>